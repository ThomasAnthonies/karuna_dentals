{% extends "base.html" %}

{% block content %}
<div class="max-w-2xl mx-auto bg-white shadow-xl rounded-2xl p-8 mt-10">
    <h1 class="text-3xl font-bold text-red-600 text-center mb-6">❌ Cancel Appointment</h1>

    <div class="space-y-6">
        <!-- Appointment Info -->
        <div>
            <h2 class="text-xl font-semibold text-gray-700 mb-4 border-b pb-2">📄 Appointment Details</h2>
            <div class="text-gray-800 space-y-2">
                <p><strong>Date:</strong> {{ appointment.date }}</p>
                <p><strong>Status:</strong> {{ appointment.status }}</p>
                <p><strong>Your Cancellations This Week:</strong> {{ cancel.cancellation_count }}</p>
            </div>
        </div>

        <!-- Cancellation Form -->
        <form method="post" action="{% url 'cancel_appointment' %}" class="space-y-4">
            {% csrf_token %}

            <div>
                <label for="cancellation_reason" class="block text-sm font-medium text-gray-700 mb-1">
                    Reason for Cancellation
                </label>
                <textarea name="cancellation_reason" id="cancellation_reason" rows="4" required
                    placeholder="Please explain why you are cancelling this appointment..."
                    class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-red-400 focus:outline-none resize-none"></textarea>
            </div>

            <!-- Submit -->
            <div class="text-center pt-2">
                <button type="submit"
                    class="bg-red-600 text-white font-semibold px-6 py-2 rounded-xl shadow hover:bg-red-700 transition duration-300">
                    🚫 Confirm Cancellation
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
